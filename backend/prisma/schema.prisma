generator client {
  provider = "prisma-client-js"
  output   = "../generated/prisma"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model Client {
  dealId                     String?  @map("deal_id")
  dealName                   String?  @map("deal_name")
  contactId                  String?  @map("contact_id")
  contactName                String?  @map("contact_name")
  companyId                  String?  @map("company_id")
  companyName                String?  @map("company_name")
  pandaDocId                 String?  @map("pandadoc_id")
  agreementId                String?  @map("agreement_id")
  agreementName              String?  @map("agreement_name")
  agreementRequired          String?  @map("agreement_required")
  paymentLink                Json?    @map("payment_link")
  stripeRequired             String?  @map("stripe_required")
  intakeMeetingRequired      String?  @map("intake_meeting_required")
  createdAt                  DateTime @default(now()) @map("created_at")
  updatedAt                  DateTime @updatedAt @map("updated_at")
  zohoRecordId               String   @unique @map("zoho_record_id")
  id                         Int      @id @default(autoincrement())
  stripeCustomerId           String?  @map("stripe_customer_id")
  pandadocAgreementCompleted String?  @map("pandadoc_agreement_completed")
  stripePaymentCompleted     String?  @map("stripe_payment_completed")
  IntakeMeetingCompleted     String?  @map("intake_meeting_completed")
  amount                     String?  @map("amount")
  calendlyBookingURL         String?  @map("calendly_booking_url")

  @@map("clients")
}

model CalendlyBookings {
  id           Int      @id @default(autoincrement())
  zohoRecordId String   @unique @map("zoho_record_id")
  payload      Json     @map("payload")
  createdAt    DateTime @default(now()) @map("created_at")
  updatedAt    DateTime @updatedAt @map("updated_at")

  @@map("calendly_bookings")
}

model StripePayments {
  id               Int       @id @default(autoincrement())
  zohoRecordId     String    @unique @map("zoho_record_id")
  clientSecret     String    @unique @map("client_secret")
  customerId       String    @map("customer_id")
  paymentDate      DateTime? @map("payment_date")
  paymentStatus    String?   @map("payment_status")
  paymentId        String?   @map("payment_id")
  payment          String?   @map("payment")
  amount           Decimal?  @map("amount") @db.Decimal(10, 2)
  paymentSource    String?   @map("payment_source")
  invoiceId        String?   @map("invoice_id")
  hostedInvoiceUrl String?   @map("hosted_invoice_url")
  errorMessage     String?   @map("error_message")
  createdAt        DateTime  @default(now()) @map("created_at")
  updatedAt        DateTime  @updatedAt @map("updated_at")

  @@map("stripe_payments")
}

model OnboardingSteps {
  id          Int           @id @default(autoincrement())
  title       String        @map("title")
  name        String        @map("name")
  type        String        @map("type")
  clientSteps ClientSteps[]

  @@map("onboarding_steps")
}

model ClientSteps {
  id           Int             @id @default(autoincrement())
  zohoRecordId String          @map("zoho_record_id")
  stepId       Int             @map("step_id")
  isCompleted  Boolean         @default(false) @map("is_completed")
  createdAt    DateTime        @default(now()) @map("created_at")
  updatedAt    DateTime        @updatedAt @map("updated_at")
  step         OnboardingSteps @relation(fields: [stepId], references: [id])

  @@map("client_steps")
}

model CheckoutClient {
  id                        Int                    @id @default(autoincrement())
  zohoRecordId              String                 @unique @map("zoho_record_id")
  stripeCustomerId          String                 @map("stripe_customer_id")
  clientSecret              String?                @unique @map("client_secret")
  amount                    String                 @map("amount")
  subscriptionScheduledDays String?                @map("subscription_scheduled_days")
  stripeInvoiceID           String?                @map("stripe_invoice_id")
  invoiceName               String?                @map("invoice_name")
  paymentSource             String?                @map("payment_source")
  paymentDate               DateTime?              @map("payment_date")
  stripePaymentId           String?                @map("stripe_payment_id")
  paymentStatus             String?                @map("payment_status")
  crmPaymentRecordId        String?                @map("crm_payment_record_id")
  invoiceType               String?                @map("invoice_type")
  createdAt                 DateTime               @default(now()) @map("created_at")
  updatedAt                 DateTime               @updatedAt @map("updated_at")
  invoiceItems              CheckoutInvoiceItems[]

  @@map("checkout_clients")
}

model CheckoutInvoiceItems {
  id                 Int            @id @default(autoincrement())
  zohoRecordId       String         @unique @map("zoho_record_id")
  invoiceItemId      String         @map("invoice_item_id")
  stripePriceId      String?        @map("stripe_price_id")
  stripeProductId    String?        @map("stripe_product_id")
  productName        String?        @map("product_name")
  amount             String?        @map("amount")
  quantity           String?        @map("quantity")
  productDescription String?        @map("product_description")
  stripeDiscountId   String?        @map("stripe_discount_id")
  zcdisplayValue     String?        @map("zc_display_value")
  createdAt          DateTime       @default(now()) @map("created_at")
  updatedAt          DateTime       @updatedAt @map("updated_at")
  checkoutClientId   Int
  checkoutClient     CheckoutClient @relation(fields: [checkoutClientId], references: [id])

  @@map("checkout_invoice_items")
}
